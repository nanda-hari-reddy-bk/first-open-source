{"ast":null,"code":"var _jsxFileName = \"D:\\\\node.js\\\\todo\\\\src\\\\Components\\\\ToDo\\\\security\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState } from \"react\";\nimport { authenticateApi, authenticateJWTApi } from \"../api/AuthenticationApi\";\nimport { apiClient } from \"../api/BaseUrl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default function AuthProvider({\n  children\n}) {\n  _s2();\n  // const [number,setNumber] = useState(10)\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [username, setUsername] = useState(null);\n  const [token, setToken] = useState(null);\n\n  // async function logIn(username, password)\n  // {\n  //     const baToken = 'Basic ' +  window.btoa(username + ':' + password)\n  //     try\n  //     {\n  //         const response = await authenticateApi(baToken)\n  //         if(response.status==200)\n  //         {\n  //             setIsAuthenticated(true)\n  //             setUsername(username)\n  //             setToken(baToken)\n  //             apiClient.interceptors.request.use( (config) => \n  //                                                             {\n  //                                                                 config.headers.Authorization=baToken\n  //                                                                 return config\n  //                                                             }\n  //                                               )\n  //             return true\n  //         }\n  //         else\n  //         {\n  //             logOut()       // just to remove duplicate code\n  //             return false\n  //         }\n  //     }\n  //     catch\n  //     {\n  //         logOut()\n  //         return false\n  //     }\n\n  // }\n\n  async function logIn(username, password) {\n    const jwtToken = 'Bearer ' + response.data.token;\n    try {\n      const response = await authenticateJWTApi(username, password);\n      if (response.status == 200) {\n        setIsAuthenticated(true);\n        setUsername(username);\n        setToken(jwtToken);\n        apiClient.interceptors.request.use(config => {\n          config.headers.Authorization = jwtToken;\n          return config;\n        });\n        return true;\n      } else {\n        logOut(); // just to remove duplicate code\n        return false;\n      }\n    } catch {\n      logOut();\n      return false;\n    }\n  }\n  function logOut() {\n    setIsAuthenticated(false);\n    setUsername(null);\n    setToken(null);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isAuthenticated,\n      setIsAuthenticated,\n      logIn,\n      logOut,\n      username,\n      token\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 9\n  }, this);\n}\n_s2(AuthProvider, \"Wn1PhaPiXLNtyW2AbFOo/bgRy6A=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useState","authenticateApi","authenticateJWTApi","apiClient","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","isAuthenticated","setIsAuthenticated","username","setUsername","token","setToken","logIn","password","jwtToken","response","data","status","interceptors","request","use","config","headers","Authorization","logOut","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/node.js/todo/src/Components/ToDo/security/AuthContext.js"],"sourcesContent":["import {createContext, useContext, useState } from \"react\"\r\nimport { authenticateApi, authenticateJWTApi } from \"../api/AuthenticationApi\"\r\nimport { apiClient } from \"../api/BaseUrl\"\r\n\r\n\r\nconst AuthContext = createContext()\r\nexport const useAuth = () => useContext(AuthContext)\r\n\r\nexport default function AuthProvider({ children })\r\n{\r\n    // const [number,setNumber] = useState(10)\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n    const [username, setUsername] = useState(null)\r\n    const [token, setToken] = useState(null)\r\n\r\n    // async function logIn(username, password)\r\n    // {\r\n    //     const baToken = 'Basic ' +  window.btoa(username + ':' + password)\r\n    //     try\r\n    //     {\r\n    //         const response = await authenticateApi(baToken)\r\n    //         if(response.status==200)\r\n    //         {\r\n    //             setIsAuthenticated(true)\r\n    //             setUsername(username)\r\n    //             setToken(baToken)\r\n    //             apiClient.interceptors.request.use( (config) => \r\n    //                                                             {\r\n    //                                                                 config.headers.Authorization=baToken\r\n    //                                                                 return config\r\n    //                                                             }\r\n    //                                               )\r\n    //             return true\r\n    //         }\r\n    //         else\r\n    //         {\r\n    //             logOut()       // just to remove duplicate code\r\n    //             return false\r\n    //         }\r\n    //     }\r\n    //     catch\r\n    //     {\r\n    //         logOut()\r\n    //         return false\r\n    //     }\r\n\r\n    // }\r\n\r\n    async function logIn(username, password)\r\n    {\r\n        const jwtToken = 'Bearer ' +  response.data.token\r\n        try\r\n        {\r\n            const response = await authenticateJWTApi(username, password)\r\n            if(response.status==200)\r\n            {\r\n                setIsAuthenticated(true)\r\n                setUsername(username)\r\n                setToken(jwtToken)\r\n                apiClient.interceptors.request.use( (config) => \r\n                                                                {\r\n                                                                    config.headers.Authorization=jwtToken\r\n                                                                    return config\r\n                                                                }\r\n                                                  )\r\n                return true\r\n            }\r\n            else\r\n            {\r\n                logOut()    // just to remove duplicate code\r\n                return false\r\n            }\r\n        }\r\n        catch\r\n        {\r\n            logOut()\r\n            return false\r\n        }\r\n\r\n    }\r\n\r\n    function logOut()\r\n    {\r\n        setIsAuthenticated(false)\r\n        setUsername(null)\r\n        setToken(null)\r\n    }\r\n\r\n    return(\r\n        <AuthContext.Provider value={ {isAuthenticated, setIsAuthenticated, logIn, logOut, username, token}}>\r\n            { children }\r\n        </AuthContext.Provider>\r\n    )\r\n}"],"mappings":";;;AAAA,SAAQA,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,eAAe,EAAEC,kBAAkB,QAAQ,0BAA0B;AAC9E,SAASC,SAAS,QAAQ,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAG1C,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;AACnC,OAAO,MAAMS,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMT,UAAU,CAACO,WAAW,CAAC;AAAA;AAAAE,EAAA,CAAvCD,OAAO;AAEpB,eAAe,SAASE,YAAYA,CAAC;EAAEC;AAAS,CAAC,EACjD;EAAAC,GAAA;EACI;EACA,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACc,QAAQ,EAAEC,WAAW,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACgB,KAAK,EAAEC,QAAQ,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;;EAEA,eAAekB,KAAKA,CAACJ,QAAQ,EAAEK,QAAQ,EACvC;IACI,MAAMC,QAAQ,GAAG,SAAS,GAAIC,QAAQ,CAACC,IAAI,CAACN,KAAK;IACjD,IACA;MACI,MAAMK,QAAQ,GAAG,MAAMnB,kBAAkB,CAACY,QAAQ,EAAEK,QAAQ,CAAC;MAC7D,IAAGE,QAAQ,CAACE,MAAM,IAAE,GAAG,EACvB;QACIV,kBAAkB,CAAC,IAAI,CAAC;QACxBE,WAAW,CAACD,QAAQ,CAAC;QACrBG,QAAQ,CAACG,QAAQ,CAAC;QAClBjB,SAAS,CAACqB,YAAY,CAACC,OAAO,CAACC,GAAG,CAAGC,MAAM,IACK;UACIA,MAAM,CAACC,OAAO,CAACC,aAAa,GAACT,QAAQ;UACrC,OAAOO,MAAM;QACjB,CACd,CAAC;QACnC,OAAO,IAAI;MACf,CAAC,MAED;QACIG,MAAM,CAAC,CAAC,EAAI;QACZ,OAAO,KAAK;MAChB;IACJ,CAAC,CACD,MACA;MACIA,MAAM,CAAC,CAAC;MACR,OAAO,KAAK;IAChB;EAEJ;EAEA,SAASA,MAAMA,CAAA,EACf;IACIjB,kBAAkB,CAAC,KAAK,CAAC;IACzBE,WAAW,CAAC,IAAI,CAAC;IACjBE,QAAQ,CAAC,IAAI,CAAC;EAClB;EAEA,oBACIZ,OAAA,CAACC,WAAW,CAACyB,QAAQ;IAACC,KAAK,EAAG;MAACpB,eAAe;MAAEC,kBAAkB;MAAEK,KAAK;MAAEY,MAAM;MAAEhB,QAAQ;MAAEE;IAAK,CAAE;IAAAN,QAAA,EAC9FA;EAAQ;IAAAuB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACQ,CAAC;AAE/B;AAACzB,GAAA,CArFuBF,YAAY;AAAA4B,EAAA,GAAZ5B,YAAY;AAAA,IAAA4B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}