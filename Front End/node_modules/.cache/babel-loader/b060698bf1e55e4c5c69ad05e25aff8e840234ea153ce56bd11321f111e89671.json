{"ast":null,"code":"var _jsxFileName = \"D:\\\\node.js\\\\todo\\\\src\\\\Components\\\\ToDo\\\\security\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useState } from \"react\";\nimport { authenticateApi } from \"../api/TodoApiservice\";\nimport { apiClient } from \"../api/BaseUrl\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport default function AuthProvider({\n  children\n}) {\n  _s2();\n  // const [number,setNumber] = useState(10)\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [username, setUsername] = useState(null);\n  const [token, setToken] = useState(null);\n\n  // setInterval(() => {setNumber(number+10)}, 1000);\n\n  // function logIn(username, password)\n  // {\n  //     if(username==='Nanda' && password==='WASDskal')\n  //         {\n  //             setIsAuthenticated(true)\n  //             setUsername(username)\n  //             return true\n\n  //         }\n  //         else\n  //         {\n  //             setIsAuthenticated(false)\n  //             setUsername(null)\n  //             return false\n  //         }\n  // }\n  async function logIn(username, password) {\n    const baToken = 'Basic ' + window.btoa(username + ':' + password);\n    try {\n      const response = await authenticateApi(baToken);\n      setIsAuthenticated(false);\n      if (response.status == 200) {\n        setIsAuthenticated(true);\n        setUsername(username);\n        setToken(baToken);\n        apiClient.interceptors.request.use(config => {\n          config.headers.Authorization = baToken;\n          return config;\n        });\n        return true;\n      } else {\n        logOut(); // just to remove duplicate code\n        return false;\n      }\n    } catch {\n      logOut();\n      return false;\n    }\n  }\n  function logOut() {\n    setIsAuthenticated(false);\n    setUsername(null);\n    setToken(null);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isAuthenticated,\n      setIsAuthenticated,\n      logIn,\n      logOut,\n      username,\n      token\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n}\n_s2(AuthProvider, \"Wn1PhaPiXLNtyW2AbFOo/bgRy6A=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useContext","useState","authenticateApi","apiClient","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","isAuthenticated","setIsAuthenticated","username","setUsername","token","setToken","logIn","password","baToken","window","btoa","response","status","interceptors","request","use","config","headers","Authorization","logOut","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/node.js/todo/src/Components/ToDo/security/AuthContext.js"],"sourcesContent":["import {createContext, useContext, useState } from \"react\"\r\nimport { authenticateApi } from \"../api/TodoApiservice\"\r\nimport { apiClient } from \"../api/BaseUrl\"\r\n\r\n\r\nconst AuthContext = createContext()\r\nexport const useAuth = () => useContext(AuthContext)\r\n\r\nexport default function AuthProvider({ children })\r\n{\r\n    // const [number,setNumber] = useState(10)\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n    const [username, setUsername] = useState(null)\r\n    const [token, setToken] = useState(null)\r\n\r\n    // setInterval(() => {setNumber(number+10)}, 1000);\r\n\r\n    // function logIn(username, password)\r\n    // {\r\n    //     if(username==='Nanda' && password==='WASDskal')\r\n    //         {\r\n    //             setIsAuthenticated(true)\r\n    //             setUsername(username)\r\n    //             return true\r\n                \r\n    //         }\r\n    //         else\r\n    //         {\r\n    //             setIsAuthenticated(false)\r\n    //             setUsername(null)\r\n    //             return false\r\n    //         }\r\n    // }\r\n    async function logIn(username, password)\r\n    {\r\n        const baToken = 'Basic ' +  window.btoa(username + ':' + password)\r\n        try\r\n        {\r\n            const response = await authenticateApi(baToken)\r\n            setIsAuthenticated(false)\r\n            if(response.status==200)\r\n            {\r\n                setIsAuthenticated(true)\r\n                setUsername(username)\r\n                setToken(baToken)\r\n                apiClient.interceptors.request.use( (config) => \r\n                                                                {\r\n                                                                    config.headers.Authorization=baToken\r\n                                                                    return config\r\n                                                                }\r\n                                                  )\r\n                return true\r\n            }\r\n            else\r\n            {\r\n                logOut()       // just to remove duplicate code\r\n                return false\r\n            }\r\n        }\r\n        catch\r\n        {\r\n            logOut()\r\n            return false\r\n        }\r\n\r\n    }\r\n\r\n    function logOut()\r\n    {\r\n        setIsAuthenticated(false)\r\n        setUsername(null)\r\n        setToken(null)\r\n    }\r\n\r\n    return(\r\n        <AuthContext.Provider value={ {isAuthenticated, setIsAuthenticated, logIn, logOut, username, token}}>\r\n            { children }\r\n        </AuthContext.Provider>\r\n    )\r\n}"],"mappings":";;;AAAA,SAAQA,aAAa,EAAEC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,SAASC,eAAe,QAAQ,uBAAuB;AACvD,SAASC,SAAS,QAAQ,gBAAgB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAG1C,MAAMC,WAAW,gBAAGP,aAAa,CAAC,CAAC;AACnC,OAAO,MAAMQ,OAAO,GAAGA,CAAA;EAAAC,EAAA;EAAA,OAAMR,UAAU,CAACM,WAAW,CAAC;AAAA;AAAAE,EAAA,CAAvCD,OAAO;AAEpB,eAAe,SAASE,YAAYA,CAAC;EAAEC;AAAS,CAAC,EACjD;EAAAC,GAAA;EACI;EACA,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EAC9C,MAAM,CAACe,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;;EAExC;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA,eAAeiB,KAAKA,CAACJ,QAAQ,EAAEK,QAAQ,EACvC;IACI,MAAMC,OAAO,GAAG,QAAQ,GAAIC,MAAM,CAACC,IAAI,CAACR,QAAQ,GAAG,GAAG,GAAGK,QAAQ,CAAC;IAClE,IACA;MACI,MAAMI,QAAQ,GAAG,MAAMrB,eAAe,CAACkB,OAAO,CAAC;MAC/CP,kBAAkB,CAAC,KAAK,CAAC;MACzB,IAAGU,QAAQ,CAACC,MAAM,IAAE,GAAG,EACvB;QACIX,kBAAkB,CAAC,IAAI,CAAC;QACxBE,WAAW,CAACD,QAAQ,CAAC;QACrBG,QAAQ,CAACG,OAAO,CAAC;QACjBjB,SAAS,CAACsB,YAAY,CAACC,OAAO,CAACC,GAAG,CAAGC,MAAM,IACK;UACIA,MAAM,CAACC,OAAO,CAACC,aAAa,GAACV,OAAO;UACpC,OAAOQ,MAAM;QACjB,CACd,CAAC;QACnC,OAAO,IAAI;MACf,CAAC,MAED;QACIG,MAAM,CAAC,CAAC,EAAO;QACf,OAAO,KAAK;MAChB;IACJ,CAAC,CACD,MACA;MACIA,MAAM,CAAC,CAAC;MACR,OAAO,KAAK;IAChB;EAEJ;EAEA,SAASA,MAAMA,CAAA,EACf;IACIlB,kBAAkB,CAAC,KAAK,CAAC;IACzBE,WAAW,CAAC,IAAI,CAAC;IACjBE,QAAQ,CAAC,IAAI,CAAC;EAClB;EAEA,oBACIZ,OAAA,CAACC,WAAW,CAAC0B,QAAQ;IAACC,KAAK,EAAG;MAACrB,eAAe;MAAEC,kBAAkB;MAAEK,KAAK;MAAEa,MAAM;MAAEjB,QAAQ;MAAEE;IAAK,CAAE;IAAAN,QAAA,EAC9FA;EAAQ;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACQ,CAAC;AAE/B;AAAC1B,GAAA,CAvEuBF,YAAY;AAAA6B,EAAA,GAAZ7B,YAAY;AAAA,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}